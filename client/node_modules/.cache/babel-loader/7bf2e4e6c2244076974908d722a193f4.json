{"ast":null,"code":"import _toConsumableArray from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/faraz/courses/SE/myapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";//Comments by Faraz, please contact him in case of queries...marzi hai faraz sb\nimport React,{Component}from\"react\";import Recphoto from\"../assets/Recommend.jpg\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import axios from\"axios\";import PhotographersCard from\"./photographersCard\";import Filter from\"./filter\";import\"../styles/photographersSelection.css\";var PhotographerSelection=/*#__PURE__*/function(_Component){_inherits(PhotographerSelection,_Component);var _super=_createSuper(PhotographerSelection);function PhotographerSelection(props){var _this;_classCallCheck(this,PhotographerSelection);// constructor\n_this=_super.call(this,props);_this.state={photographers:[],categoryKey:_this.props.match.params.id,//to catch the Category ID recieved from previous page use console.log(this.props) to see props coming from previous pages\nphotographerKeys:[],levelOfPhotographer:\"All\",cards:[],lowerRange:0,upperRange:300000,min:0,max:10000000,categoryName:\"\"};_this.jumbotronCode=_this.jumbotronCode.bind(_assertThisInitialized(_this));//renders the jumbotron\n_this.getPhotographers=_this.getPhotographers.bind(_assertThisInitialized(_this));//gets the photographer profiles of that particular category clicked\n// this.getCards = this.getCards.bind(this);\n_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleRangeChange=_this.handleRangeChange.bind(_assertThisInitialized(_this));_this.handleSortby=_this.handleSortby.bind(_assertThisInitialized(_this));return _this;}_createClass(PhotographerSelection,[{key:\"jumbotronCode\",value:function jumbotronCode(){return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundImage:\"url(\"+Recphoto+\")\",paddingTop:50,padding:50,paddingBottom:50,backgroundPosition:\"center\",backgroundSize:\"cover\",backgroundRepeat:\"no-repeat\",height:\"70vh\"},className:\"jumbotron jumbotron-fluid pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",_defineProperty({className:\"display-4\"},\"className\",\"text-center text-white pr-auto pt-auto pb-auto mt-auto\"),this.state.categoryName)));}},{key:\"getPhotographers\",value:function getPhotographers(photographerKeys){var _this2=this;photographerKeys.map(function(photographerKey){axios//sending a get request to get all the photographers of the category from Mongo\n.get(\"http://localhost:5000/photographers/\"+photographerKey.Key).then(function(res){_this2.setState({photographers:_this2.state.photographers.concat([//storing all the photographer ids and their name values in my local state array\n{Key:res.data._id,name:res.data.Name,level:res.data.Level,range:res.data.Range,rangeNumber:res.data.Range===\"Silver\"?0:\"Gold\"?1:\"Platinum\"?2:-1}])});// console.log(this.state.photographers);\n}).catch(function(error){console.log(error);});});this.setState({min:Math.min.apply(Math,_toConsumableArray(this.state.photographers.map(function(item){return item.range;}))),max:Math.max.apply(Math,_toConsumableArray(this.state.photographers.map(function(item){return item.range;})))});}},{key:\"handleClick\",value:function handleClick(event){//for setting level filter\nthis.setState({levelOfPhotographer:event.target.value});}},{key:\"handleRangeChange\",value:function handleRangeChange(event){//for setting range filter\nthis.setState({lowerRange:event[0],upperRange:event[1]});}},{key:\"handleSortby\",value:function handleSortby(event){//sort by function is sorting properly but something wrong when rendering probably cause setstate is async\nif(event.target.id==0){this.setState({photographers:this.state.photographers.sort(function(a,b){return a.range>b.range?1:-1;})});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){// console.log(this.state.photographers);\nconsole.log(this.state.min,this.state.max);}},{key:\"componentWillMount\",value:function componentWillMount(){var _this3=this;//function runs at the start of component loading\naxios//sending a get request to get all the photographers of the category from Mongo\n.get(\"http://localhost:5000/categories/\"+this.state.categoryKey).then(function(res){res.data.photographers.map(function(entree){return _this3.setState({photographerKeys:_this3.state.photographerKeys.concat([//storing all the photographer ids of a particular category in my local state array\n{Key:entree}]),categoryName:res.data.categoryname});});_this3.getPhotographers(_this3.state.photographerKeys);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this4=this;// console.log(this.state.photographers);\nvar cards=this.state.photographers.map(function(Photographer){//cards that we render from the cards component\nreturn/*#__PURE__*/React.createElement(PhotographersCard,{Photographer:Photographer,levelOfPhotographer:_this4.state.levelOfPhotographer,lowerRange:_this4.state.lowerRange,upperRange:_this4.state.upperRange});});console.log(\"b\");return/*#__PURE__*/React.createElement(React.Fragment,null,this.jumbotronCode(),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Filter//contains the level and range filter\n,{handleClick:this.handleClick,handleRangeChange:this.handleRangeChange,handleSortby:this.handleSortby}),/*#__PURE__*/React.createElement(Row,{className:\"pb-5\"},cards)));}}]);return PhotographerSelection;}(Component);export default PhotographerSelection;","map":{"version":3,"sources":["/home/faraz/courses/SE/myapp/client/src/components/photographersSelection.jsx"],"names":["React","Component","Recphoto","Container","Row","Col","axios","PhotographersCard","Filter","PhotographerSelection","props","state","photographers","categoryKey","match","params","id","photographerKeys","levelOfPhotographer","cards","lowerRange","upperRange","min","max","categoryName","jumbotronCode","bind","getPhotographers","handleClick","handleRangeChange","handleSortby","backgroundImage","paddingTop","padding","paddingBottom","backgroundPosition","backgroundSize","backgroundRepeat","height","map","photographerKey","get","Key","then","res","setState","concat","data","_id","name","Name","level","Level","range","Range","rangeNumber","catch","error","console","log","Math","item","event","target","value","sort","a","b","entree","categoryname","Photographer"],"mappings":"gkCAAA;AAEA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAO,sCAAP,C,GAEMC,CAAAA,qB,8HACJ,+BAAYC,KAAZ,CAAmB,uDACjB;AACA,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,aAAa,CAAE,EADJ,CAEXC,WAAW,CAAE,MAAKH,KAAL,CAAWI,KAAX,CAAiBC,MAAjB,CAAwBC,EAF1B,CAE8B;AACzCC,gBAAgB,CAAE,EAHP,CAIXC,mBAAmB,CAAE,KAJV,CAKXC,KAAK,CAAE,EALI,CAMXC,UAAU,CAAE,CAND,CAOXC,UAAU,CAAE,MAPD,CAQXC,GAAG,CAAE,CARM,CASXC,GAAG,CAAE,QATM,CAUXC,YAAY,CAAE,EAVH,CAAb,CAaA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CAAoD;AACpD,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,+BAAxB,CAA0D;AAC1D;AACA,MAAKE,WAAL,CAAmB,MAAKA,WAAL,CAAiBF,IAAjB,+BAAnB,CACA,MAAKG,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBH,IAAvB,+BAAzB,CACA,MAAKI,YAAL,CAAoB,MAAKA,YAAL,CAAkBJ,IAAlB,+BAApB,CArBiB,aAsBlB,C,uFAEe,CACd,mBACE,2BACE,KAAK,CAAE,CACLK,eAAe,CAAE,OAAS7B,QAAT,CAAoB,GADhC,CAEL8B,UAAU,CAAE,EAFP,CAGLC,OAAO,CAAE,EAHJ,CAILC,aAAa,CAAE,EAJV,CAKLC,kBAAkB,CAAE,QALf,CAMLC,cAAc,CAAE,OANX,CAOLC,gBAAgB,CAAE,WAPb,CAQLC,MAAM,CAAE,MARH,CADT,CAWE,SAAS,CAAC,gCAXZ,eAaE,2BAAK,SAAS,CAAC,WAAf,eACE,0CACE,SAAS,CAAC,WADZ,cAEY,wDAFZ,EAIG,KAAK3B,KAAL,CAAWa,YAJd,CADF,CAbF,CADF,CAwBD,C,0DAEgBP,gB,CAAkB,iBACjCA,gBAAgB,CAACsB,GAAjB,CAAqB,SAACC,eAAD,CAAqB,CACxClC,KAAM;AAAD,CACFmC,GADH,CACO,uCAAyCD,eAAe,CAACE,GADhE,EAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,CACb,MAAI,CAACC,QAAL,CAAc,CACZjC,aAAa,CAAE,MAAI,CAACD,KAAL,CAAWC,aAAX,CAAyBkC,MAAzB,CAAgC,CAC7C;AACA,CACEJ,GAAG,CAAEE,GAAG,CAACG,IAAJ,CAASC,GADhB,CAEEC,IAAI,CAAEL,GAAG,CAACG,IAAJ,CAASG,IAFjB,CAGEC,KAAK,CAAEP,GAAG,CAACG,IAAJ,CAASK,KAHlB,CAIEC,KAAK,CAAET,GAAG,CAACG,IAAJ,CAASO,KAJlB,CAKEC,WAAW,CACTX,GAAG,CAACG,IAAJ,CAASO,KAAT,GAAmB,QAAnB,CACI,CADJ,CAEI,OACA,CADA,CAEA,WACA,CADA,CAEA,CAAC,CAZT,CAF6C,CAAhC,CADH,CAAd,EAmBA;AACD,CAvBH,EAwBGE,KAxBH,CAwBS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CA1BH,EA2BD,CA5BD,EA6BA,KAAKZ,QAAL,CAAc,CACZvB,GAAG,CAAEsC,IAAI,CAACtC,GAAL,OAAAsC,IAAI,oBAAQ,KAAKjD,KAAL,CAAWC,aAAX,CAAyB2B,GAAzB,CAA6B,SAACsB,IAAD,QAAUA,CAAAA,IAAI,CAACR,KAAf,EAA7B,CAAR,EADG,CAEZ9B,GAAG,CAAEqC,IAAI,CAACrC,GAAL,OAAAqC,IAAI,oBAAQ,KAAKjD,KAAL,CAAWC,aAAX,CAAyB2B,GAAzB,CAA6B,SAACsB,IAAD,QAAUA,CAAAA,IAAI,CAACR,KAAf,EAA7B,CAAR,EAFG,CAAd,EAID,C,gDACWS,K,CAAO,CACjB;AACA,KAAKjB,QAAL,CAAc,CAAE3B,mBAAmB,CAAE4C,KAAK,CAACC,MAAN,CAAaC,KAApC,CAAd,EACD,C,4DAEiBF,K,CAAO,CACvB;AACA,KAAKjB,QAAL,CAAc,CAAEzB,UAAU,CAAE0C,KAAK,CAAC,CAAD,CAAnB,CAAwBzC,UAAU,CAAEyC,KAAK,CAAC,CAAD,CAAzC,CAAd,EACD,C,kDAEYA,K,CAAO,CAClB;AACA,GAAIA,KAAK,CAACC,MAAN,CAAa/C,EAAb,EAAmB,CAAvB,CAA0B,CACxB,KAAK6B,QAAL,CAAc,CACZjC,aAAa,CAAE,KAAKD,KAAL,CAAWC,aAAX,CAAyBqD,IAAzB,CAA8B,SAACC,CAAD,CAAIC,CAAJ,QAC3CD,CAAAA,CAAC,CAACb,KAAF,CAAUc,CAAC,CAACd,KAAZ,CAAoB,CAApB,CAAwB,CAAC,CADkB,EAA9B,CADH,CAAd,EAKD,CACF,C,+DACoB,CACnB;AACAK,OAAO,CAACC,GAAR,CAAY,KAAKhD,KAAL,CAAWW,GAAvB,CAA4B,KAAKX,KAAL,CAAWY,GAAvC,EACD,C,+DACoB,iBACnB;AACAjB,KAAM;AAAD,CACFmC,GADH,CACO,oCAAsC,KAAK9B,KAAL,CAAWE,WADxD,EAEG8B,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbA,GAAG,CAACG,IAAJ,CAASnC,aAAT,CAAuB2B,GAAvB,CAA2B,SAAC6B,MAAD,QACzB,CAAA,MAAI,CAACvB,QAAL,CAAc,CACZ5B,gBAAgB,CAAE,MAAI,CAACN,KAAL,CAAWM,gBAAX,CAA4B6B,MAA5B,CAAmC,CACnD;AACA,CACEJ,GAAG,CAAE0B,MADP,CAFmD,CAAnC,CADN,CAOZ5C,YAAY,CAAEoB,GAAG,CAACG,IAAJ,CAASsB,YAPX,CAAd,CADyB,EAA3B,EAWA,MAAI,CAAC1C,gBAAL,CAAsB,MAAI,CAAChB,KAAL,CAAWM,gBAAjC,EACD,CAfH,EAgBGuC,KAhBH,CAgBS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAlBH,EAmBD,C,uCACQ,iBACP;AACA,GAAItC,CAAAA,KAAK,CAAG,KAAKR,KAAL,CAAWC,aAAX,CAAyB2B,GAAzB,CAA6B,SAAC+B,YAAD,CAAkB,CACzD;AACA,mBAEI,oBAAC,iBAAD,EACE,YAAY,CAAEA,YADhB,CAEE,mBAAmB,CAAE,MAAI,CAAC3D,KAAL,CAAWO,mBAFlC,CAGE,UAAU,CAAE,MAAI,CAACP,KAAL,CAAWS,UAHzB,CAIE,UAAU,CAAE,MAAI,CAACT,KAAL,CAAWU,UAJzB,EAFJ,CAWD,CAbW,CAAZ,CAcAqC,OAAO,CAACC,GAAR,CAAY,GAAZ,EACA,mBACE,oBAAC,KAAD,CAAO,QAAP,MACG,KAAKlC,aAAL,EADH,cAEE,2BAAK,SAAS,CAAC,WAAf,eACE,oBAAC,MAAO;AAAR,EACE,WAAW,CAAE,KAAKG,WADpB,CAEE,iBAAiB,CAAE,KAAKC,iBAF1B,CAGE,YAAY,CAAE,KAAKC,YAHrB,EADF,cAOE,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,EAEGX,KAFH,CAPF,CAFF,CADF,CAoBD,C,mCA1KiClB,S,EA6KpC,cAAeQ,CAAAA,qBAAf","sourcesContent":["//Comments by Faraz, please contact him in case of queries...marzi hai faraz sb\n\nimport React, { Component } from \"react\";\nimport Recphoto from \"../assets/Recommend.jpg\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport axios from \"axios\";\nimport PhotographersCard from \"./photographersCard\";\nimport Filter from \"./filter\";\nimport \"../styles/photographersSelection.css\";\n\nclass PhotographerSelection extends Component {\n  constructor(props) {\n    // constructor\n    super(props);\n    this.state = {\n      photographers: [],\n      categoryKey: this.props.match.params.id, //to catch the Category ID recieved from previous page use console.log(this.props) to see props coming from previous pages\n      photographerKeys: [],\n      levelOfPhotographer: \"All\",\n      cards: [],\n      lowerRange: 0,\n      upperRange: 300000,\n      min: 0,\n      max: 10000000,\n      categoryName: \"\",\n    };\n\n    this.jumbotronCode = this.jumbotronCode.bind(this); //renders the jumbotron\n    this.getPhotographers = this.getPhotographers.bind(this); //gets the photographer profiles of that particular category clicked\n    // this.getCards = this.getCards.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleRangeChange = this.handleRangeChange.bind(this);\n    this.handleSortby = this.handleSortby.bind(this);\n  }\n\n  jumbotronCode() {\n    return (\n      <div\n        style={{\n          backgroundImage: \"url(\" + Recphoto + \")\",\n          paddingTop: 50,\n          padding: 50,\n          paddingBottom: 50,\n          backgroundPosition: \"center\",\n          backgroundSize: \"cover\",\n          backgroundRepeat: \"no-repeat\",\n          height: \"70vh\",\n        }}\n        className=\"jumbotron jumbotron-fluid pb-5\"\n      >\n        <div className=\"container\">\n          <h1\n            className=\"display-4\"\n            className=\"text-center text-white pr-auto pt-auto pb-auto mt-auto\"\n          >\n            {this.state.categoryName}\n          </h1>\n        </div>\n      </div>\n    );\n  }\n\n  getPhotographers(photographerKeys) {\n    photographerKeys.map((photographerKey) => {\n      axios //sending a get request to get all the photographers of the category from Mongo\n        .get(\"http://localhost:5000/photographers/\" + photographerKey.Key)\n        .then((res) => {\n          this.setState({\n            photographers: this.state.photographers.concat([\n              //storing all the photographer ids and their name values in my local state array\n              {\n                Key: res.data._id,\n                name: res.data.Name,\n                level: res.data.Level,\n                range: res.data.Range,\n                rangeNumber:\n                  res.data.Range === \"Silver\"\n                    ? 0\n                    : \"Gold\"\n                    ? 1\n                    : \"Platinum\"\n                    ? 2\n                    : -1,\n              },\n            ]),\n          });\n          // console.log(this.state.photographers);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    });\n    this.setState({\n      min: Math.min(...this.state.photographers.map((item) => item.range)),\n      max: Math.max(...this.state.photographers.map((item) => item.range)),\n    });\n  }\n  handleClick(event) {\n    //for setting level filter\n    this.setState({ levelOfPhotographer: event.target.value });\n  }\n\n  handleRangeChange(event) {\n    //for setting range filter\n    this.setState({ lowerRange: event[0], upperRange: event[1] });\n  }\n\n  handleSortby(event) {\n    //sort by function is sorting properly but something wrong when rendering probably cause setstate is async\n    if (event.target.id == 0) {\n      this.setState({\n        photographers: this.state.photographers.sort((a, b) =>\n          a.range > b.range ? 1 : -1\n        ),\n      });\n    }\n  }\n  componentDidUpdate() {\n    // console.log(this.state.photographers);\n    console.log(this.state.min, this.state.max);\n  }\n  componentWillMount() {\n    //function runs at the start of component loading\n    axios //sending a get request to get all the photographers of the category from Mongo\n      .get(\"http://localhost:5000/categories/\" + this.state.categoryKey)\n      .then((res) => {\n        res.data.photographers.map((entree) =>\n          this.setState({\n            photographerKeys: this.state.photographerKeys.concat([\n              //storing all the photographer ids of a particular category in my local state array\n              {\n                Key: entree,\n              },\n            ]),\n            categoryName: res.data.categoryname,\n          })\n        );\n        this.getPhotographers(this.state.photographerKeys);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  render() {\n    // console.log(this.state.photographers);\n    let cards = this.state.photographers.map((Photographer) => {\n      //cards that we render from the cards component\n      return ( \n        \n          <PhotographersCard\n            Photographer={Photographer}\n            levelOfPhotographer={this.state.levelOfPhotographer}\n            lowerRange={this.state.lowerRange}\n            upperRange={this.state.upperRange}\n          />\n        \n        \n      );\n    });\n    console.log(\"b\");\n    return (\n      <React.Fragment>\n        {this.jumbotronCode()}\n        <div className=\"container\">\n          <Filter //contains the level and range filter\n            handleClick={this.handleClick}\n            handleRangeChange={this.handleRangeChange}\n            handleSortby={this.handleSortby}\n          />\n          {/* For a responsive grid all things set to auto */}\n          <Row className=\"pb-5\">\n            {/* loading the card component in the grid from PhotographersCard */}\n            {cards}\n          </Row>\n\n          \n\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PhotographerSelection;\n"]},"metadata":{},"sourceType":"module"}