{"ast":null,"code":"import React from 'react';\nimport Utils from '../utils/utils';\nimport Mixins from '../utils/mixins';\nimport F7Toggle from './toggle';\nimport F7Range from './range';\nimport F7TextEditor from './text-editor';\nimport __reactComponentWatch from '../runtime-helpers/react-component-watch.js';\nimport __reactComponentDispatchEvent from '../runtime-helpers/react-component-dispatch-event.js';\nimport __reactComponentSlots from '../runtime-helpers/react-component-slots.js';\nimport __reactComponentSetProps from '../runtime-helpers/react-component-set-props.js';\n\nclass F7Input extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.__reactRefs = {};\n\n    this.state = (() => {\n      return {\n        inputFocused: false,\n        inputInvalid: false\n      };\n    })();\n\n    (() => {\n      Utils.bindMethods(this, 'onFocus onBlur onInput onChange onTextareaResize onInputNotEmpty onInputEmpty onInputClear'.split(' '));\n    })();\n  }\n\n  domValue() {\n    const self = this;\n    const {\n      inputEl\n    } = self.refs;\n    if (!inputEl) return undefined;\n    return inputEl.value;\n  }\n\n  inputHasValue() {\n    const self = this;\n    const {\n      value,\n      type\n    } = self.props;\n\n    if (type === 'datepicker' && Array.isArray(value) && value.length === 0) {\n      return false;\n    }\n\n    const domValue = self.domValue();\n    return typeof value === 'undefined' ? domValue || domValue === 0 : value || value === 0;\n  }\n\n  validateInput(inputEl) {\n    const self = this;\n    const f7 = self.$f7;\n    if (!f7 || !inputEl) return;\n    const validity = inputEl.validity;\n    if (!validity) return;\n    const {\n      onValidate\n    } = self.props;\n\n    if (!validity.valid) {\n      if (onValidate) onValidate(false);\n\n      if (self.state.inputInvalid !== true) {\n        self.setState({\n          inputInvalid: true\n        });\n      }\n    } else if (self.state.inputInvalid !== false) {\n      if (onValidate) onValidate(true);\n      self.setState({\n        inputInvalid: false\n      });\n    }\n  }\n\n  onTextareaResize(event) {\n    this.dispatchEvent('textarea:resize textareaResize', event);\n  }\n\n  onInputNotEmpty(event) {\n    this.dispatchEvent('input:notempty inputNotEmpty', event);\n  }\n\n  onInputEmpty(event) {\n    this.dispatchEvent('input:empty inputEmpty', event);\n  }\n\n  onInputClear(event) {\n    this.dispatchEvent('input:clear inputClear', event);\n  }\n\n  onInput(...args) {\n    const self = this;\n    const {\n      validate,\n      validateOnBlur\n    } = self.props;\n    self.dispatchEvent('input', ...args);\n\n    if (!(validateOnBlur || validateOnBlur === '') && (validate || validate === '') && self.refs && self.refs.inputEl) {\n      self.validateInput(self.refs.inputEl);\n    }\n  }\n\n  onFocus(...args) {\n    this.dispatchEvent('focus', ...args);\n    this.setState({\n      inputFocused: true\n    });\n  }\n\n  onBlur(...args) {\n    const self = this;\n    const {\n      validate,\n      validateOnBlur\n    } = self.props;\n    self.dispatchEvent('blur', ...args);\n\n    if ((validate || validate === '' || validateOnBlur || validateOnBlur === '') && self.refs && self.refs.inputEl) {\n      self.validateInput(self.refs.inputEl);\n    }\n\n    self.setState({\n      inputFocused: false\n    });\n  }\n\n  onChange(...args) {\n    this.dispatchEvent('change', ...args);\n\n    if (this.props.type === 'texteditor') {\n      this.dispatchEvent('texteditor:change textEditorChange', args[1]);\n    }\n  }\n\n  render() {\n    const self = this;\n    const props = self.props;\n    const {\n      type,\n      name,\n      value,\n      defaultValue,\n      inputmode,\n      placeholder,\n      id,\n      inputId,\n      size,\n      accept,\n      autocomplete,\n      autocorrect,\n      autocapitalize,\n      spellcheck,\n      autofocus,\n      autosave,\n      checked,\n      disabled,\n      max,\n      min,\n      step,\n      maxlength,\n      minlength,\n      multiple,\n      readonly,\n      required,\n      inputStyle,\n      pattern,\n      validate,\n      validateOnBlur,\n      tabindex,\n      resizable,\n      clearButton,\n      errorMessage,\n      errorMessageForce,\n      info,\n      wrap,\n      dropdown,\n      style,\n      className,\n      noStoreData,\n      noFormStoreData,\n      ignoreStoreData,\n      outline,\n      textEditorParams\n    } = props;\n    const domValue = self.domValue();\n    const inputHasValue = self.inputHasValue();\n    let inputEl;\n\n    const createInput = (InputTag, children) => {\n      const needsValue = type !== 'file' && type !== 'datepicker' && type !== 'colorpicker';\n      const needsType = InputTag === 'input';\n      let inputType = type;\n\n      if (inputType === 'datepicker' || inputType === 'colorpicker') {\n        inputType = 'text';\n      }\n\n      const inputClassName = Utils.classNames(!wrap && className, {\n        resizable: inputType === 'textarea' && resizable,\n        'no-store-data': noFormStoreData || noStoreData || ignoreStoreData,\n        'input-invalid': errorMessage && errorMessageForce || self.state.inputInvalid,\n        'input-with-value': inputHasValue,\n        'input-focused': self.state.inputFocused\n      });\n      let input;\n      let inputValue;\n\n      if (needsValue) {\n        if (typeof value !== 'undefined') inputValue = value;else inputValue = domValue;\n      }\n\n      const valueProps = {};\n\n      if (type !== 'datepicker' && type !== 'colorpicker') {\n        if ('value' in props) valueProps.value = inputValue;\n        if ('defaultValue' in props) valueProps.defaultValue = defaultValue;\n      }\n\n      {\n        input = React.createElement(InputTag, Object.assign({\n          ref: __reactNode => {\n            this.__reactRefs['inputEl'] = __reactNode;\n          },\n          style: inputStyle,\n          name: name,\n          type: needsType ? inputType : undefined,\n          placeholder: placeholder,\n          inputMode: inputmode,\n          id: inputId,\n          size: size,\n          accept: accept,\n          autoComplete: autocomplete,\n          autoCorrect: autocorrect,\n          autoCapitalize: autocapitalize,\n          spellCheck: spellcheck,\n          autoFocus: autofocus,\n          autoSave: autosave,\n          checked: checked,\n          disabled: disabled,\n          max: max,\n          maxLength: maxlength,\n          min: min,\n          minLength: minlength,\n          step: step,\n          multiple: multiple,\n          readOnly: readonly,\n          required: required,\n          pattern: pattern,\n          validate: typeof validate === 'string' && validate.length ? validate : undefined,\n          'data-validate': validate === true || validate === '' || validateOnBlur === true || validateOnBlur === '' ? true : undefined,\n          'data-validate-on-blur': validateOnBlur === true || validateOnBlur === '' ? true : undefined,\n          tabIndex: tabindex,\n          'data-error-message': errorMessageForce ? undefined : errorMessage,\n          className: inputClassName,\n          onFocus: self.onFocus,\n          onBlur: self.onBlur,\n          onInput: self.onInput,\n          onChange: self.onChange\n        }, valueProps), children);\n      }\n      return input;\n    };\n\n    const {\n      default: slotsDefault,\n      info: slotsInfo\n    } = self.slots;\n\n    if (type === 'select' || type === 'textarea' || type === 'file') {\n      if (type === 'select') {\n        inputEl = createInput('select', slotsDefault);\n      } else if (type === 'file') {\n        inputEl = createInput('input');\n      } else {\n        inputEl = createInput('textarea');\n      }\n    } else if (slotsDefault && slotsDefault.length > 0 || !type) {\n      inputEl = slotsDefault;\n    } else if (type === 'toggle') {\n      inputEl = React.createElement(F7Toggle, {\n        checked: checked,\n        readonly: readonly,\n        name: name,\n        value: value,\n        disabled: disabled,\n        id: inputId,\n        onChange: self.onChange\n      });\n    } else if (type === 'range') {\n      inputEl = React.createElement(F7Range, {\n        value: value,\n        disabled: disabled,\n        min: min,\n        max: max,\n        step: step,\n        name: name,\n        id: inputId,\n        input: true,\n        onRangeChange: self.onChange\n      });\n    } else if (type === 'texteditor') {\n      inputEl = React.createElement(F7TextEditor, Object.assign({\n        value: value,\n        resizable: resizable,\n        placeholder: placeholder,\n        onTextEditorFocus: self.onFocus,\n        onTextEditorBlur: self.onBlur,\n        onTextEditorInput: self.onInput,\n        onTextEditorChange: self.onChange\n      }, textEditorParams));\n    } else {\n      inputEl = createInput('input');\n    }\n\n    if (wrap) {\n      const wrapClasses = Utils.classNames(className, 'input', {\n        'input-outline': outline,\n        'input-dropdown': dropdown === 'auto' ? type === 'select' : dropdown\n      }, Mixins.colorClasses(props));\n      return React.createElement('div', {\n        id: id,\n        className: wrapClasses,\n        style: style\n      }, inputEl, errorMessage && errorMessageForce && React.createElement('div', {\n        className: 'input-error-message'\n      }, errorMessage), clearButton && React.createElement('span', {\n        className: 'input-clear-button'\n      }), (info || slotsInfo && slotsInfo.length) && React.createElement('div', {\n        className: 'input-info'\n      }, info, this.slots['info']));\n    }\n\n    return inputEl;\n  }\n\n  componentWillUnmount() {\n    const self = this;\n    const {\n      type,\n      resizable,\n      clearButton\n    } = self.props;\n    if (type === 'range' || type === 'toggle') return;\n    const inputEl = self.refs.inputEl;\n    if (!inputEl) return;\n    inputEl.removeEventListener('input:notempty', self.onInputNotEmpty, false);\n\n    if (type === 'textarea' && resizable) {\n      inputEl.removeEventListener('textarea:resize', self.onTextareaResize, false);\n    }\n\n    if (clearButton) {\n      inputEl.removeEventListener('input:empty', self.onInputEmpty, false);\n      inputEl.removeEventListener('input:clear', self.onInputClear, false);\n    }\n\n    if (self.f7Calendar && self.f7Calendar.destroy) {\n      self.f7Calendar.destroy();\n    }\n\n    if (self.f7ColorPicker && self.f7ColorPicker.destroy) {\n      self.f7ColorPicker.destroy();\n    }\n\n    delete self.f7Calendar;\n    delete self.f7ColorPicker;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    __reactComponentWatch(this, 'props.value', prevProps, prevState, () => {\n      const self = this;\n      const {\n        type\n      } = self.props;\n      if (type === 'range' || type === 'toggle') return;\n      if (!self.$f7) return;\n      self.updateInputOnDidUpdate = true;\n\n      if (self.f7Calendar) {\n        self.f7Calendar.setValue(self.props.value);\n      }\n\n      if (self.f7ColorPicker) {\n        self.f7ColorPicker.setValue(self.props.value);\n      }\n    });\n\n    const self = this;\n    const {\n      validate,\n      validateOnBlur,\n      resizable\n    } = self.props;\n    const f7 = self.$f7;\n    if (!f7) return;\n\n    if (self.updateInputOnDidUpdate) {\n      const inputEl = self.refs.inputEl;\n      if (!inputEl) return;\n      self.updateInputOnDidUpdate = false;\n      f7.input.checkEmptyState(inputEl);\n\n      if (validate && !validateOnBlur) {\n        self.validateInput(inputEl);\n      }\n\n      if (resizable) {\n        f7.input.resizeTextarea(inputEl);\n      }\n    }\n  }\n\n  componentDidMount() {\n    const self = this;\n    self.$f7ready(f7 => {\n      const {\n        validate,\n        validateOnBlur,\n        resizable,\n        type,\n        clearButton,\n        value,\n        defaultValue,\n        calendarParams,\n        colorPickerParams\n      } = self.props;\n      if (type === 'range' || type === 'toggle') return;\n      const inputEl = self.refs.inputEl;\n      if (!inputEl) return;\n      inputEl.addEventListener('input:notempty', self.onInputNotEmpty, false);\n\n      if (type === 'textarea' && resizable) {\n        inputEl.addEventListener('textarea:resize', self.onTextareaResize, false);\n      }\n\n      if (clearButton) {\n        inputEl.addEventListener('input:empty', self.onInputEmpty, false);\n        inputEl.addEventListener('input:clear', self.onInputClear, false);\n      }\n\n      if (type === 'datepicker') {\n        self.f7Calendar = f7.calendar.create(Object.assign({\n          inputEl,\n          value,\n          on: {\n            change(calendar, calendarValue) {\n              self.dispatchEvent('calendar:change calendarChange', calendarValue);\n            }\n\n          }\n        }, calendarParams || {}));\n      }\n\n      if (type === 'colorpicker') {\n        self.f7ColorPicker = f7.colorPicker.create(Object.assign({\n          inputEl,\n          value,\n          on: {\n            change(colorPicker, colorPickerValue) {\n              self.dispatchEvent('colorpicker:change colorPickerChange', colorPickerValue);\n            }\n\n          }\n        }, colorPickerParams || {}));\n      }\n\n      f7.input.checkEmptyState(inputEl);\n\n      if (!(validateOnBlur || validateOnBlur === '') && (validate || validate === '') && (typeof value !== 'undefined' && value !== null && value !== '' || typeof defaultValue !== 'undefined' && defaultValue !== null && defaultValue !== '')) {\n        setTimeout(() => {\n          self.validateInput(inputEl);\n        }, 0);\n      }\n\n      if (resizable) {\n        f7.input.resizeTextarea(inputEl);\n      }\n    });\n  }\n\n  get slots() {\n    return __reactComponentSlots(this.props);\n  }\n\n  dispatchEvent(events, ...args) {\n    return __reactComponentDispatchEvent(this, events, ...args);\n  }\n\n  get refs() {\n    return this.__reactRefs;\n  }\n\n  set refs(refs) {}\n\n}\n\n__reactComponentSetProps(F7Input, Object.assign({\n  type: String,\n  name: String,\n  value: [String, Number, Array, Date, Object],\n  defaultValue: [String, Number, Array],\n  inputmode: String,\n  placeholder: String,\n  id: [String, Number],\n  className: String,\n  style: Object,\n  inputId: [String, Number],\n  size: [String, Number],\n  accept: [String, Number],\n  autocomplete: [String],\n  autocorrect: [String],\n  autocapitalize: [String],\n  spellcheck: [String],\n  autofocus: Boolean,\n  autosave: String,\n  checked: Boolean,\n  disabled: Boolean,\n  max: [String, Number],\n  min: [String, Number],\n  step: [String, Number],\n  maxlength: [String, Number],\n  minlength: [String, Number],\n  multiple: Boolean,\n  readonly: Boolean,\n  required: Boolean,\n  inputStyle: Object,\n  pattern: String,\n  validate: [Boolean, String],\n  validateOnBlur: Boolean,\n  onValidate: Function,\n  tabindex: [String, Number],\n  resizable: Boolean,\n  clearButton: Boolean,\n  noFormStoreData: Boolean,\n  noStoreData: Boolean,\n  ignoreStoreData: Boolean,\n  errorMessage: String,\n  errorMessageForce: Boolean,\n  info: String,\n  outline: Boolean,\n  wrap: {\n    type: Boolean,\n    default: true\n  },\n  dropdown: {\n    type: [String, Boolean],\n    default: 'auto'\n  },\n  calendarParams: Object,\n  colorPickerParams: Object,\n  textEditorParams: Object\n}, Mixins.colorProps));\n\nF7Input.displayName = 'f7-input';\nexport default F7Input;","map":{"version":3,"sources":["/home/faraz/courses/SE/myapp/node_modules/framework7-react/components/input.js"],"names":["React","Utils","Mixins","F7Toggle","F7Range","F7TextEditor","__reactComponentWatch","__reactComponentDispatchEvent","__reactComponentSlots","__reactComponentSetProps","F7Input","Component","constructor","props","context","__reactRefs","state","inputFocused","inputInvalid","bindMethods","split","domValue","self","inputEl","refs","undefined","value","inputHasValue","type","Array","isArray","length","validateInput","f7","$f7","validity","onValidate","valid","setState","onTextareaResize","event","dispatchEvent","onInputNotEmpty","onInputEmpty","onInputClear","onInput","args","validate","validateOnBlur","onFocus","onBlur","onChange","render","name","defaultValue","inputmode","placeholder","id","inputId","size","accept","autocomplete","autocorrect","autocapitalize","spellcheck","autofocus","autosave","checked","disabled","max","min","step","maxlength","minlength","multiple","readonly","required","inputStyle","pattern","tabindex","resizable","clearButton","errorMessage","errorMessageForce","info","wrap","dropdown","style","className","noStoreData","noFormStoreData","ignoreStoreData","outline","textEditorParams","createInput","InputTag","children","needsValue","needsType","inputType","inputClassName","classNames","input","inputValue","valueProps","createElement","Object","assign","ref","__reactNode","inputMode","autoComplete","autoCorrect","autoCapitalize","spellCheck","autoFocus","autoSave","maxLength","minLength","readOnly","tabIndex","default","slotsDefault","slotsInfo","slots","onRangeChange","onTextEditorFocus","onTextEditorBlur","onTextEditorInput","onTextEditorChange","wrapClasses","colorClasses","componentWillUnmount","removeEventListener","f7Calendar","destroy","f7ColorPicker","componentDidUpdate","prevProps","prevState","updateInputOnDidUpdate","setValue","checkEmptyState","resizeTextarea","componentDidMount","$f7ready","calendarParams","colorPickerParams","addEventListener","calendar","create","on","change","calendarValue","colorPicker","colorPickerValue","setTimeout","events","String","Number","Date","Boolean","Function","colorProps","displayName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Utils from '../utils/utils';\nimport Mixins from '../utils/mixins';\nimport F7Toggle from './toggle';\nimport F7Range from './range';\nimport F7TextEditor from './text-editor';\nimport __reactComponentWatch from '../runtime-helpers/react-component-watch.js';\nimport __reactComponentDispatchEvent from '../runtime-helpers/react-component-dispatch-event.js';\nimport __reactComponentSlots from '../runtime-helpers/react-component-slots.js';\nimport __reactComponentSetProps from '../runtime-helpers/react-component-set-props.js';\n\nclass F7Input extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.__reactRefs = {};\n\n    this.state = (() => {\n      return {\n        inputFocused: false,\n        inputInvalid: false\n      };\n    })();\n\n    (() => {\n      Utils.bindMethods(this, 'onFocus onBlur onInput onChange onTextareaResize onInputNotEmpty onInputEmpty onInputClear'.split(' '));\n    })();\n  }\n\n  domValue() {\n    const self = this;\n    const {\n      inputEl\n    } = self.refs;\n    if (!inputEl) return undefined;\n    return inputEl.value;\n  }\n\n  inputHasValue() {\n    const self = this;\n    const {\n      value,\n      type\n    } = self.props;\n\n    if (type === 'datepicker' && Array.isArray(value) && value.length === 0) {\n      return false;\n    }\n\n    const domValue = self.domValue();\n    return typeof value === 'undefined' ? domValue || domValue === 0 : value || value === 0;\n  }\n\n  validateInput(inputEl) {\n    const self = this;\n    const f7 = self.$f7;\n    if (!f7 || !inputEl) return;\n    const validity = inputEl.validity;\n    if (!validity) return;\n    const {\n      onValidate\n    } = self.props;\n\n    if (!validity.valid) {\n      if (onValidate) onValidate(false);\n\n      if (self.state.inputInvalid !== true) {\n        self.setState({\n          inputInvalid: true\n        });\n      }\n    } else if (self.state.inputInvalid !== false) {\n      if (onValidate) onValidate(true);\n      self.setState({\n        inputInvalid: false\n      });\n    }\n  }\n\n  onTextareaResize(event) {\n    this.dispatchEvent('textarea:resize textareaResize', event);\n  }\n\n  onInputNotEmpty(event) {\n    this.dispatchEvent('input:notempty inputNotEmpty', event);\n  }\n\n  onInputEmpty(event) {\n    this.dispatchEvent('input:empty inputEmpty', event);\n  }\n\n  onInputClear(event) {\n    this.dispatchEvent('input:clear inputClear', event);\n  }\n\n  onInput(...args) {\n    const self = this;\n    const {\n      validate,\n      validateOnBlur\n    } = self.props;\n    self.dispatchEvent('input', ...args);\n\n    if (!(validateOnBlur || validateOnBlur === '') && (validate || validate === '') && self.refs && self.refs.inputEl) {\n      self.validateInput(self.refs.inputEl);\n    }\n  }\n\n  onFocus(...args) {\n    this.dispatchEvent('focus', ...args);\n    this.setState({\n      inputFocused: true\n    });\n  }\n\n  onBlur(...args) {\n    const self = this;\n    const {\n      validate,\n      validateOnBlur\n    } = self.props;\n    self.dispatchEvent('blur', ...args);\n\n    if ((validate || validate === '' || validateOnBlur || validateOnBlur === '') && self.refs && self.refs.inputEl) {\n      self.validateInput(self.refs.inputEl);\n    }\n\n    self.setState({\n      inputFocused: false\n    });\n  }\n\n  onChange(...args) {\n    this.dispatchEvent('change', ...args);\n\n    if (this.props.type === 'texteditor') {\n      this.dispatchEvent('texteditor:change textEditorChange', args[1]);\n    }\n  }\n\n  render() {\n    const self = this;\n    const props = self.props;\n    const {\n      type,\n      name,\n      value,\n      defaultValue,\n      inputmode,\n      placeholder,\n      id,\n      inputId,\n      size,\n      accept,\n      autocomplete,\n      autocorrect,\n      autocapitalize,\n      spellcheck,\n      autofocus,\n      autosave,\n      checked,\n      disabled,\n      max,\n      min,\n      step,\n      maxlength,\n      minlength,\n      multiple,\n      readonly,\n      required,\n      inputStyle,\n      pattern,\n      validate,\n      validateOnBlur,\n      tabindex,\n      resizable,\n      clearButton,\n      errorMessage,\n      errorMessageForce,\n      info,\n      wrap,\n      dropdown,\n      style,\n      className,\n      noStoreData,\n      noFormStoreData,\n      ignoreStoreData,\n      outline,\n      textEditorParams\n    } = props;\n    const domValue = self.domValue();\n    const inputHasValue = self.inputHasValue();\n    let inputEl;\n\n    const createInput = (InputTag, children) => {\n      const needsValue = type !== 'file' && type !== 'datepicker' && type !== 'colorpicker';\n      const needsType = InputTag === 'input';\n      let inputType = type;\n\n      if (inputType === 'datepicker' || inputType === 'colorpicker') {\n        inputType = 'text';\n      }\n\n      const inputClassName = Utils.classNames(!wrap && className, {\n        resizable: inputType === 'textarea' && resizable,\n        'no-store-data': noFormStoreData || noStoreData || ignoreStoreData,\n        'input-invalid': errorMessage && errorMessageForce || self.state.inputInvalid,\n        'input-with-value': inputHasValue,\n        'input-focused': self.state.inputFocused\n      });\n      let input;\n      let inputValue;\n\n      if (needsValue) {\n        if (typeof value !== 'undefined') inputValue = value;else inputValue = domValue;\n      }\n\n      const valueProps = {};\n\n      if (type !== 'datepicker' && type !== 'colorpicker') {\n        if ('value' in props) valueProps.value = inputValue;\n        if ('defaultValue' in props) valueProps.defaultValue = defaultValue;\n      }\n\n      {\n        input = React.createElement(InputTag, Object.assign({\n          ref: __reactNode => {\n            this.__reactRefs['inputEl'] = __reactNode;\n          },\n          style: inputStyle,\n          name: name,\n          type: needsType ? inputType : undefined,\n          placeholder: placeholder,\n          inputMode: inputmode,\n          id: inputId,\n          size: size,\n          accept: accept,\n          autoComplete: autocomplete,\n          autoCorrect: autocorrect,\n          autoCapitalize: autocapitalize,\n          spellCheck: spellcheck,\n          autoFocus: autofocus,\n          autoSave: autosave,\n          checked: checked,\n          disabled: disabled,\n          max: max,\n          maxLength: maxlength,\n          min: min,\n          minLength: minlength,\n          step: step,\n          multiple: multiple,\n          readOnly: readonly,\n          required: required,\n          pattern: pattern,\n          validate: typeof validate === 'string' && validate.length ? validate : undefined,\n          'data-validate': validate === true || validate === '' || validateOnBlur === true || validateOnBlur === '' ? true : undefined,\n          'data-validate-on-blur': validateOnBlur === true || validateOnBlur === '' ? true : undefined,\n          tabIndex: tabindex,\n          'data-error-message': errorMessageForce ? undefined : errorMessage,\n          className: inputClassName,\n          onFocus: self.onFocus,\n          onBlur: self.onBlur,\n          onInput: self.onInput,\n          onChange: self.onChange\n        }, valueProps), children);\n      }\n      return input;\n    };\n\n    const {\n      default: slotsDefault,\n      info: slotsInfo\n    } = self.slots;\n\n    if (type === 'select' || type === 'textarea' || type === 'file') {\n      if (type === 'select') {\n        inputEl = createInput('select', slotsDefault);\n      } else if (type === 'file') {\n        inputEl = createInput('input');\n      } else {\n        inputEl = createInput('textarea');\n      }\n    } else if (slotsDefault && slotsDefault.length > 0 || !type) {\n      inputEl = slotsDefault;\n    } else if (type === 'toggle') {\n      inputEl = React.createElement(F7Toggle, {\n        checked: checked,\n        readonly: readonly,\n        name: name,\n        value: value,\n        disabled: disabled,\n        id: inputId,\n        onChange: self.onChange\n      });\n    } else if (type === 'range') {\n      inputEl = React.createElement(F7Range, {\n        value: value,\n        disabled: disabled,\n        min: min,\n        max: max,\n        step: step,\n        name: name,\n        id: inputId,\n        input: true,\n        onRangeChange: self.onChange\n      });\n    } else if (type === 'texteditor') {\n      inputEl = React.createElement(F7TextEditor, Object.assign({\n        value: value,\n        resizable: resizable,\n        placeholder: placeholder,\n        onTextEditorFocus: self.onFocus,\n        onTextEditorBlur: self.onBlur,\n        onTextEditorInput: self.onInput,\n        onTextEditorChange: self.onChange\n      }, textEditorParams));\n    } else {\n      inputEl = createInput('input');\n    }\n\n    if (wrap) {\n      const wrapClasses = Utils.classNames(className, 'input', {\n        'input-outline': outline,\n        'input-dropdown': dropdown === 'auto' ? type === 'select' : dropdown\n      }, Mixins.colorClasses(props));\n      return React.createElement('div', {\n        id: id,\n        className: wrapClasses,\n        style: style\n      }, inputEl, errorMessage && errorMessageForce && React.createElement('div', {\n        className: 'input-error-message'\n      }, errorMessage), clearButton && React.createElement('span', {\n        className: 'input-clear-button'\n      }), (info || slotsInfo && slotsInfo.length) && React.createElement('div', {\n        className: 'input-info'\n      }, info, this.slots['info']));\n    }\n\n    return inputEl;\n  }\n\n  componentWillUnmount() {\n    const self = this;\n    const {\n      type,\n      resizable,\n      clearButton\n    } = self.props;\n    if (type === 'range' || type === 'toggle') return;\n    const inputEl = self.refs.inputEl;\n    if (!inputEl) return;\n    inputEl.removeEventListener('input:notempty', self.onInputNotEmpty, false);\n\n    if (type === 'textarea' && resizable) {\n      inputEl.removeEventListener('textarea:resize', self.onTextareaResize, false);\n    }\n\n    if (clearButton) {\n      inputEl.removeEventListener('input:empty', self.onInputEmpty, false);\n      inputEl.removeEventListener('input:clear', self.onInputClear, false);\n    }\n\n    if (self.f7Calendar && self.f7Calendar.destroy) {\n      self.f7Calendar.destroy();\n    }\n\n    if (self.f7ColorPicker && self.f7ColorPicker.destroy) {\n      self.f7ColorPicker.destroy();\n    }\n\n    delete self.f7Calendar;\n    delete self.f7ColorPicker;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    __reactComponentWatch(this, 'props.value', prevProps, prevState, () => {\n      const self = this;\n      const {\n        type\n      } = self.props;\n      if (type === 'range' || type === 'toggle') return;\n      if (!self.$f7) return;\n      self.updateInputOnDidUpdate = true;\n\n      if (self.f7Calendar) {\n        self.f7Calendar.setValue(self.props.value);\n      }\n\n      if (self.f7ColorPicker) {\n        self.f7ColorPicker.setValue(self.props.value);\n      }\n    });\n\n    const self = this;\n    const {\n      validate,\n      validateOnBlur,\n      resizable\n    } = self.props;\n    const f7 = self.$f7;\n    if (!f7) return;\n\n    if (self.updateInputOnDidUpdate) {\n      const inputEl = self.refs.inputEl;\n      if (!inputEl) return;\n      self.updateInputOnDidUpdate = false;\n      f7.input.checkEmptyState(inputEl);\n\n      if (validate && !validateOnBlur) {\n        self.validateInput(inputEl);\n      }\n\n      if (resizable) {\n        f7.input.resizeTextarea(inputEl);\n      }\n    }\n  }\n\n  componentDidMount() {\n    const self = this;\n    self.$f7ready(f7 => {\n      const {\n        validate,\n        validateOnBlur,\n        resizable,\n        type,\n        clearButton,\n        value,\n        defaultValue,\n        calendarParams,\n        colorPickerParams\n      } = self.props;\n      if (type === 'range' || type === 'toggle') return;\n      const inputEl = self.refs.inputEl;\n      if (!inputEl) return;\n      inputEl.addEventListener('input:notempty', self.onInputNotEmpty, false);\n\n      if (type === 'textarea' && resizable) {\n        inputEl.addEventListener('textarea:resize', self.onTextareaResize, false);\n      }\n\n      if (clearButton) {\n        inputEl.addEventListener('input:empty', self.onInputEmpty, false);\n        inputEl.addEventListener('input:clear', self.onInputClear, false);\n      }\n\n      if (type === 'datepicker') {\n        self.f7Calendar = f7.calendar.create(Object.assign({\n          inputEl,\n          value,\n          on: {\n            change(calendar, calendarValue) {\n              self.dispatchEvent('calendar:change calendarChange', calendarValue);\n            }\n\n          }\n        }, calendarParams || {}));\n      }\n\n      if (type === 'colorpicker') {\n        self.f7ColorPicker = f7.colorPicker.create(Object.assign({\n          inputEl,\n          value,\n          on: {\n            change(colorPicker, colorPickerValue) {\n              self.dispatchEvent('colorpicker:change colorPickerChange', colorPickerValue);\n            }\n\n          }\n        }, colorPickerParams || {}));\n      }\n\n      f7.input.checkEmptyState(inputEl);\n\n      if (!(validateOnBlur || validateOnBlur === '') && (validate || validate === '') && (typeof value !== 'undefined' && value !== null && value !== '' || typeof defaultValue !== 'undefined' && defaultValue !== null && defaultValue !== '')) {\n        setTimeout(() => {\n          self.validateInput(inputEl);\n        }, 0);\n      }\n\n      if (resizable) {\n        f7.input.resizeTextarea(inputEl);\n      }\n    });\n  }\n\n  get slots() {\n    return __reactComponentSlots(this.props);\n  }\n\n  dispatchEvent(events, ...args) {\n    return __reactComponentDispatchEvent(this, events, ...args);\n  }\n\n  get refs() {\n    return this.__reactRefs;\n  }\n\n  set refs(refs) {}\n\n}\n\n__reactComponentSetProps(F7Input, Object.assign({\n  type: String,\n  name: String,\n  value: [String, Number, Array, Date, Object],\n  defaultValue: [String, Number, Array],\n  inputmode: String,\n  placeholder: String,\n  id: [String, Number],\n  className: String,\n  style: Object,\n  inputId: [String, Number],\n  size: [String, Number],\n  accept: [String, Number],\n  autocomplete: [String],\n  autocorrect: [String],\n  autocapitalize: [String],\n  spellcheck: [String],\n  autofocus: Boolean,\n  autosave: String,\n  checked: Boolean,\n  disabled: Boolean,\n  max: [String, Number],\n  min: [String, Number],\n  step: [String, Number],\n  maxlength: [String, Number],\n  minlength: [String, Number],\n  multiple: Boolean,\n  readonly: Boolean,\n  required: Boolean,\n  inputStyle: Object,\n  pattern: String,\n  validate: [Boolean, String],\n  validateOnBlur: Boolean,\n  onValidate: Function,\n  tabindex: [String, Number],\n  resizable: Boolean,\n  clearButton: Boolean,\n  noFormStoreData: Boolean,\n  noStoreData: Boolean,\n  ignoreStoreData: Boolean,\n  errorMessage: String,\n  errorMessageForce: Boolean,\n  info: String,\n  outline: Boolean,\n  wrap: {\n    type: Boolean,\n    default: true\n  },\n  dropdown: {\n    type: [String, Boolean],\n    default: 'auto'\n  },\n  calendarParams: Object,\n  colorPickerParams: Object,\n  textEditorParams: Object\n}, Mixins.colorProps));\n\nF7Input.displayName = 'f7-input';\nexport default F7Input;"]},"metadata":{},"sourceType":"module"}